{% extends "base.html" %}
{% block content %}
<h2>ğŸ’¾ Backups & Restauration</h2>

<div class="card">
    <h3>Sauvegardes disponibles</h3>

    {% if backups %}
<table>
    <tr>
        <th style="width: 55%;">Fichier</th>
        <th style="width: 45%; text-align:center;">Actions</th>
    </tr>

    {% for b in backups %}
    <tr>
        <td>{{ b }}</td>
        <td style="text-align:center;">

            <div style="display:flex; gap:10px; justify-content:center; flex-wrap:wrap;">

                <a class="btn btn-secondary"
                    style="padding:6px 10px; font-size:0.85em; min-width:110px; text-align:center;"
                    href="{{ url_for('download_backup', name=b) }}">
                    â¬‡ï¸ TÃ©lÃ©charger
                </a>

                <a class="btn btn-success"
                    style="padding:6px 10px; font-size:0.85em; min-width:110px; text-align:center;"
                    href="{{ url_for('restore_existing', name=b) }}"
                    onclick="return confirm('Restaurer {{ b }} ?');">
                    â™»ï¸ Restaurer
                </a>

                <a class="btn btn-danger"
                    style="padding:6px 10px; font-size:0.85em; min-width:110px; text-align:center;"
                    href="{{ url_for('delete_backup', name=b) }}"
                    onclick="return confirm('Supprimer {{ b }} ?');">
                    ğŸ—‘ Supprimer
                </a>

            </div>

        </td>
    </tr>
    {% endfor %}
</table>
    {% else %}
        <p>Aucune sauvegarde pour lâ€™instant.</p>
    {% endif %}
</div>

<div class="card">
<h3>CrÃ©er une sauvegarde</h3>

<div style="margin-top:10px;">
    <a class="btn btn-primary" href="{{ url_for('create_backup') }}">
        ğŸ“¦ Sauvegarder maintenant
    </a>
</div>
</div>

<div class="card">
    <h3>Restaurer depuis un fichier</h3>
    <form action="{{ url_for('restore') }}" method="post" enctype="multipart/form-data">
        <input type="file" name="backup_file" required>
        <button class="btn btn-warning"
                style="padding:8px 12px;font-size:0.9em;"
                onclick="return confirm('Restaurer ce backup et redÃ©marrer le Pi ?');">
            â™»ï¸ Restaurer (upload)
        </button>
    </form>
</div>

{% endblock %}
